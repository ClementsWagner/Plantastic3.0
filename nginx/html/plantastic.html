<html>
<head>
<link rel="stylesheet" href="style.css">
<script>
function showData(){
	var xmlHttp = new XMLHttpRequest();
	xmlHttp.onreadystatechange = function(){
		if(this.readyState == 4 && this.status == 200){
			var data = JSON.parse(this.responseText);
			buildTable(data);
			//document.getElementById("data").innerHTML = `Humidity: ${data["humidity"]} Brightness: ${data["light"]} Temperature: ${data["temperature"]} Recorded: ${data["DateTime"]}`;
		}
	}
	xmlHttp.open("GET", "readData.php", true);
	xmlHttp.send();
}

function buildTable(data){
	let reversed = data.reverse();
	let table = "";
	table = "<table><tr><th>Humidity</th><th>Brightness </th><th>Temperature</th><th>Recorded</th></tr>";
	reversed.forEach(element => table += `<tr><td>${element["humidity"]}</td><td>${element["light"]} Lux</td><td>${element["temperature"]} C</td><td>${element["DateTime"]}</td></tr>`);
	table += "</table>";
	document.getElementById("dataTable").innerHTML = table;
}

</script>
</head>
<body>
<div class="header">
	<a href="#default" class="logo">CompanyLogo</a>
	<div class="header-right">
		<a class="Notification" href="#home">Notification</a>
</div>
	  </div>
		<p>
		<div id="dataTable"></div>
		<script type="text/javascript">
		showData();
		setInterval(showData, 2000);
		</script>
		</p>
</body>
</html>
