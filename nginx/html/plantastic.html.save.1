<html>
<head>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
function drawChart(data){
	let xValues = generateLabels(data);
	let humidityValues = 0;
	let lightValue = 0;
	let tempValue = 0;

}

function generateLabels(data){

}

function generateHumidityData(data){

}

function generatelightData(data){

}

function generateTempData(data){

}
</script>
<script>
function showData(){
	var xmlHttp = new XMLHttpRequest();
	xmlHttp.onreadystatechange = function(){
		if(this.readyState == 4 && this.status == 200){
			var data = JSON.parse(this.responseText);
			buildTable(data);
			drawChart(data);
			//document.getElementById("data").innerHTML = `Humidity: ${data["humidity"]} Brightness: ${data["light"]} Temperature: ${data["temperature"]} Recorded: ${data["DateTime"]}`;
		}
	}
	xmlHttp.open("GET", "readData.php", true);
	xmlHttp.send();
}

function buildTable(data){
	let reversed = data.reverse();
	let table = "";
	table = "<table><tr><th>Humidity</th><th>Brightness</th><th>Temperature</th><th>Recorded</th></tr>";
	reversed.forEach(element => table += `<tr><td>${element["humidity"]}</td><td>${element["light"]}</td><td>${element["temperature"]}</td><td>${element["DateTime"]}</td></tr>`);
	table += "</table>";
	document.getElementById("dataTable").innerHTML = table;
}

</script>
</head>
<body>
<p>
<canvas id="myChart" style="width:100%;max-width:700px"></canvas>
<div id="dataTable"></div>
<script type="text/javascript">
 showData();
 setInterval(showData, 2000);
</script>
</p>
</body>
</html>
